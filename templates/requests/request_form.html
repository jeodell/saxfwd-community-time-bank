<!-- prettier-ignore -->
{% extends 'base.html' %}
{% block title %}{% if form.instance.pk %}Edit Request{% else %}New Community Request{% endif %} - Saxapahaw Timebank{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto p-8">
  <div class="bg-white rounded-lg shadow-sm p-8">
    <!-- Back Button -->
    <div class="mb-6">
      <a
        href="{% if form.instance.pk %}{% url 'community_request_detail' form.instance.pk %}{% else %}{% url 'request_list' %}{% endif %}"
        class="inline-flex items-center text-sm font-medium text-gray-600 hover:text-primary transition-colors duration-200"
      >
        <i class="fas fa-arrow-left mr-2"></i>
        {% if form.instance.pk %}Back to Request{% else %}Back to Requests{% endif %}
      </a>
    </div>

    <!-- Form Header -->
    <div class="border-b border-gray-200 pb-6 mb-6">
      <h1 class="text-3xl font-bold text-gray-900">
        {% if form.instance.pk %}Edit Request{% else %}New Community Request{% endif %}
      </h1>
      <p class="mt-2 text-gray-600">
        {% if form.instance.pk %} Update your community request details below. {% else %} Post a new request for help
        from the community. Be specific about what you need and when you need it. {% endif %}
      </p>
    </div>

    <!-- Form -->
    <form method="post" class="space-y-6">
      {% csrf_token %}

      <!-- Title -->
      <div>
        <label for="{{ form.title.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Request Title *
        </label>
        {{ form.title }} {% if form.title.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.title.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Description -->
      <div>
        <label for="{{ form.description.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Description *
        </label>
        {{ form.description }} {% if form.description.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.description.errors.0 }}</p>
        {% endif %}
        <p class="mt-1 text-sm text-gray-500">Provide a detailed description of what you need help with.</p>
      </div>

      <!-- Category -->
      <div>
        <label for="{{ form.category.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Category
        </label>
        {{ form.category }} {% if form.category.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.category.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Preferred Date -->
      <div>
        <label for="{{ form.preferred_date.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Preferred Date
        </label>
        {{ form.preferred_date }} {% if form.preferred_date.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.preferred_date.errors.0 }}</p>
        {% endif %}
        <p class="mt-1 text-sm text-gray-500">When would you like this help to be completed?</p>
      </div>

      <!-- Estimated Hours -->
      <div>
        <label for="{{ form.estimated_hours.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Estimated Hours
        </label>
        {{ form.estimated_hours }} {% if form.estimated_hours.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.estimated_hours.errors.0 }}</p>
        {% endif %}
        <p class="mt-1 text-sm text-gray-500">How many hours do you think this will take?</p>
      </div>

      <!-- Number of Users Needed -->
      <div>
        <label for="{{ form.num_users_needed.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Number of People Needed
        </label>
        {{ form.num_users_needed }} {% if form.num_users_needed.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.num_users_needed.errors.0 }}</p>
        {% endif %}
        <p class="mt-1 text-sm text-gray-500">How many people do you need to help with this request?</p>
      </div>

      <!-- Urgency -->
      <div>
        <label for="{{ form.urgency.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
          Urgency Level
        </label>
        {{ form.urgency }} {% if form.urgency.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.urgency.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Form Actions -->
      <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
        <a
          href="{% if form.instance.pk %}{% url 'community_request_detail' form.instance.pk %}{% else %}{% url 'request_list' %}{% endif %}"
          class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200"
        >
          Cancel
        </a>
        <button
          type="submit"
          class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200"
        >
          {% if form.instance.pk %}
          <i class="fas fa-save mr-2"></i>
          Update Request {% else %}
          <i class="fas fa-plus mr-2"></i>
          Create Request {% endif %}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
